#!/bin/bash -e

generate_nfs_vars() {
    mkdir -p ${ROOT_DIR}/generated-vars

    cat << EOF > ${ROOT_DIR}/generated-vars/nfs-vars.yml
---
nfs-ldap-service-user: ${LDAP_SVC_USER}
nfs-ldap-service-password: ${LDAP_SVC_PASS}
nfs-ldap-host: ${LDAP_HOST}
nfs-ldap-port: ${LDAP_PORT}
nfs-ldap-proto: ${LDAP_PROTO}
nfs-ldap-fqdn: ${LDAP_USER_FQDN}

ecs-password: ${ECS_PASSWORD}
ecs-username: ${ECS_USERNAME}
ecs-ip: ${ECS_IP}
EOF
}

main() {
  ROOT_DIR="${1}"

  generate_nfs_vars
}

main ${PWD}