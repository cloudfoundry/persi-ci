---
platform: linux

image_resource:
  type: docker-image
  source:
    repository: relintdockerhubpushbot/cf-deployment-concourse-tasks
    tag: latest

inputs:
- name: persi-ci
- name: director-state
  optional: true
- name: smith-env
  optional: true

outputs:
- name: generated-vars

params:
  GENERATE_DATADOG_VARS: false
  GENERATE_EFS_VARS: false
  GENERATE_NFS_VARS: false
  GENERATE_GCS_BLOBSTORE_VARS: false
  GENERATE_S3_BLOBSTORE_VARS: false
  GENERATE_SMB_VARS: false
  LDAP_HOST:
  LDAP_SVC_USER:
  LDAP_SVC_PASS:
  LDAP_PORT:
  LDAP_PROTO:
  LDAP_USER_FQDN:
  LDAP_TEST_SERVER_SSL_ACTIVE:
  LDAP_TEST_SERVER_CA_CERT:
  LDAP_TEST_SERVER_CERT:
  LDAP_TEST_SERVER_KEY:
  APP_PACKAGE_DIRECTORY_KEY:
  BUILDPACK_DIRECTORY_KEY:
  DROPLET_DIRECTORY_KEY:
  RESOURCE_DIRECTORY_KEY:
  NFSTESTSERVER_STATIC_IP:
  NFSTESTSERVER_TWO_STATIC_IP:
  NFSTESTLDAPSERVER_STATIC_IP:
  GCS_BLOBSTORE_PROJECT_ID:
  GCS_BLOBSTORE_SERVICE_ACCOUNT_EMAIL:
  GCS_BLOBSTORE_SERVICE_ACCOUNT_KEY:
  S3_BLOBSTORE_ID:
  S3_BLOBSTORE_KEY:
  S3_BLOBSTORE_REGION:
  DATADOG_API_KEY:
  DATADOG_METRIC_PREFIX:
  BBL_IAAS: aws
  BBL_AWS_REGION:
  BBL_AWS_ACCESS_KEY_ID:
  BBL_AWS_SECRET_ACCESS_KEY:
  BBL_STATE_DIR: bbl-state
  SMB_USERNAME:
  SMB_PASSWORD:

run:
  path: persi-ci/scripts/ci/generate_variables
